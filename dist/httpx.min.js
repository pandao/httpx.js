/*! httpx.js v0.2.0 | httpx.min.js | The simple HTTP / RESTful requests library of JavaScript (XHR). | MIT License | By: Pandao | https://github.com/pandao/httpx.js | 2015-06-17 */
!function(e){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&(define.amd||define.cmd)?define(e):window.httpx=e()}(function(){"use strict";function e(e,t){if("object"==typeof t){var n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));t=n.join("&")}return e=e+(e.indexOf("?")<0?""!==t&&t?"?":"":""!==t&&t?"&":"")+t,{url:e,data:t}}var t={version:"0.2.0",xhr:function(){return new XMLHttpRequest},defaults:function(e){e=e||"";var t={async:!0,timeout:3e3,method:"GET",url:"",data:"",dataType:"text",headers:{},contentType:"text/plain; charset=UTF-8",jsonp:"callback",success:function(){},error:function(e,t){console.error("HTTP Request Error: ",e,t,this.status+" ("+(this.statusText?this.statusText:"Unkown Error / Timeout")+")")},ontimeout:function(e,t){console.error("HTTP Request Timeout: ",e,t,this.status+" ("+(this.statusText?this.statusText:"Timeout")+")")}};return""!==e&&"string"==typeof e?t[e]:t},request:function(t){t=t||{};var n=this.defaults();for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);var r=n.url,s=n.data,a=n.method,i=e(r,s);s=i.data,"GET"===a&&(r=i.url);var c=this.xhr(),u=function(e){if(4===c.readyState)if(200===c.status||304===c.status){var t;switch(n.dataType){case"json":t=JSON.parse(c.responseText);break;case"xml":t=c.responseXML;break;default:t=c.responseText}n.success.bind(c)(t)}else n.error.bind(c)(a,r,e)};c.addEventListener("readystatechange",u),c.addEventListener("error",function(e){n.error.bind(c)(a,r,e)}),c.addEventListener("timeout",function(e){n.ontimeout.bind(c)(a,r,e)}),c.open(a,r,!0),"GET"!==a?c.setRequestHeader("Content-type","application/x-www-form-urlencoded"):c.setRequestHeader("Content-type",n.contentType);for(var d in n.headers)c.setRequestHeader(d,n.headers[d]);c.$url=r,c.$method=a,c.$dataType=n.dataType,c.timeout=n.timeout,c.send(s)},exec:function(e,t,n,o,r){n=n||{},o=o||function(){},r=r||this.defaults("error"),"function"==typeof n&&(r=o,o=n,n="");var s={url:t,method:e,data:n,success:o,error:r};"object"==typeof t&&(s=t,s.method=e),this.request(s)},get:function(e,t,n,o){this.exec("GET",e,t,n,o)},post:function(e,t,n,o){this.exec("POST",e,t,n,o)},put:function(e,t,n,o){this.exec("PUT",e,t,n,o)},patch:function(e,t,n,o){this.exec("PATCH",e,t,n,o)},"delete":function(e,t,n,o){this.exec("DELETE",e,t,n,o)},json:function(e,t,n,o){t=t||{},n=n||function(){},o=o||this.defaults("error"),"function"==typeof t&&(o=n,n=t,t="");var r={url:e,dataType:"json",method:"GET",data:t,success:n,error:o};"object"==typeof e&&(r=e,r.method="GET",r.dataType="json"),this.request(r)},getJSON:function(e,t,n,o){this.json(e,t,n,o)},jsonp:function(t,n,o,r){r=r||"callback","function"==typeof n&&(r=o,o=n,n="");var s=e(t,n);t=s.url,n=s.data;var a="__jsonp_"+r+(new Date).getTime()+"_"+Math.floor(1e5*Math.random())+"__";t+=(t.indexOf("?")<0?"?":"&")+r+"="+a;var i=function(e){return function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(o){}n=n||{},e(n,t),window[a]=null,document.body.removeChild(document.getElementById(a))}};window[a]=i(o);var c=document.createElement("script");c.src=t,c.async=!0,c.id=a,document.body.appendChild(c)},getScript:function(e,t){if(""===e)return void alert("Error: Get script source can't be empty");t=t||function(){};var n=document.getElementsByTagName("head")[0],o=document.querySelectorAll('script[src="'+e+'"]');o.length>0&&n.removeChild(o[0]);var r=document.createElement("script");r.type="text/javascript",r.onload=r.onreadystatechange=function(){(!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r=void 0,t())},r.src=e,r.async=!0,n.appendChild(r)}};return t});